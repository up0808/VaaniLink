<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <title>VaaniLink â€“ Connect & Chat</title>
    <meta name="google-site-verification" content="cAK8SSwBYFev4YHkUZy48fJGnA5_ndWSnnyz3wY69UY" />
    <meta name="description" content="A social platform to connect, chat, and make video/audio calls with friends.">
    <meta name="keywords" content="chat, video call, audio call, social app, friends, connect">
    <meta property="og:title" content="VaaniLink â€“ Connect & Chat">
    <meta property="og:description" content="Connect, chat, and make video/audio calls with friends.">
    <meta property="og:image" content="logo.png">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="canonical" href="https://vaani-link.vercel.app/" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body>
    <div id="app-container">
        <div id="auth-view" class="view active">
            <h1>VaaniLink</h1>
            <p class="subtitle">Connect through meaningful conversations</p>
            <button id="google-signin-btn">
                <svg viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
                Continue with Google
            </button>
            <div id="auth-error"></div>
        </div>

        <div id="profile-setup-view" class="view">
            <h1>Welcome to VaaniLink!</h1>
            <p class="welcome-text">Let's set up your profile to get started</p>
            
            <form id="profile-setup-form">
                <div class="profile-pic-upload">
                    <div class="profile-pic-preview" id="profile-pic-preview">
                        ðŸ“¸
                    </div>
                    <div class="profile-pic-overlay">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                    </div>
                    <input type="file" id="profile-pic-input" accept="image/*">
                </div>

                <div class="form-group">
                    <label for="display-name-input">Display Name</label>
                    <input type="text" id="display-name-input" required maxlength="50" placeholder="Your display name">
                    <div id="display-name-error" class="validation-message error"></div>
                </div>

                <div class="form-group">
                    <label for="username-input">Username</label>
                    <input type="text" id="username-input" required minlength="3" maxlength="20" placeholder="Choose a unique username">
                    <div id="username-validation" class="validation-message"></div>
                </div>

                <div class="form-group">
                    <label for="bio-input">Bio (Optional)</label>
                    <textarea id="bio-input" maxlength="150" placeholder="Tell others about yourself..." rows="3"></textarea>
                </div>

                <button type="submit" id="save-profile-btn" class="btn-primary">
                    <span class="btn-text">Create Profile</span>
                    <div class="loading-spinner" style="display: none;"></div>
                </button>
                
                <div id="profile-error" class="validation-message error" style="margin-top: 16px;"></div>
                <div id="profile-success" class="validation-message success" style="margin-top: 16px;"></div>
            </form>
        </div>

        <div id="main-view" class="view">
            <header class="main-header">
                <div class="top-section">
                    <h1>VaaniLink</h1>
                    <div class="header-actions">
                        <button id="search-users-btn" class="header-btn" title="Search Users">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                        </button>
                        <button id="menu-btn" class="header-btn" title="Profile & Settings">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <nav class="main-nav">
                    <div id="nav-home" class="nav-tab active">
                        Chats
                        <span class="badge" id="chats-badge"></span>
                    </div>
                    <div id="nav-requests" class="nav-tab">
                        Requests
                        <span class="badge" id="requests-badge"></span>
                    </div>
                    <div id="nav-calls" class="nav-tab">
                        Calls
                        <span class="badge" id="calls-badge"></span>
                    </div>
                </nav>
            </header>

            <main id="main-content">
                <div id="home-content" class="content-panel active">
                    <div class="placeholder-text">
                        <span class="emoji">ðŸ’¬</span>
                        No chats yet<br>
                        Search for users to start connecting!
                    </div>
                </div>
                
                <div id="requests-content" class="content-panel">
                    <div class="placeholder-text">
                        <span class="emoji">ðŸ‘‹</span>
                        No follow requests<br>
                        New requests will appear here
                    </div>
                </div>
                
                <div id="calls-content" class="content-panel">
                    <div class="placeholder-text">
                        <span class="emoji">ðŸ“ž</span>
                        No call history<br>
                        Your calls will be logged here
                    </div>
                </div>
            </main>
        </div>

        <div id="search-view" class="view">
            <header class="search-header">
                <button class="back-btn" id="search-back-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <input type="text" id="user-search-input" placeholder="Search users...">
            </header>
            <div id="search-results"></div>
        </div>

        <div id="chat-view" class="view">
            <header class="chat-header">
                <button class="back-btn" id="chat-back-btn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                </button>
                <div id="chat-partner-avatar" class="avatar"></div>
                <div class="chat-header-info">
                    <div id="chat-partner-name" class="name"></div>
                    <div id="chat-partner-status" class="status">
                        <div class="online-status">
                            <div class="status-dot"></div>
                            <span>Online</span>
                        </div>
                    </div>
                </div>
                <div class="chat-actions">
                    <button id="voice-call-btn" class="header-btn" title="Voice Call">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                        </svg>
                    </button>
                    <button id="video-call-btn" class="header-btn" title="Video Call">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/>
                        </svg>
                    </button>
                    <button id="chat-more-btn" class="header-btn" title="More Options">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                    </button>
                </div>
            </header>

            <div id="chat-messages"></div>
            
            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <span id="typing-user"></span> is typing...
            </div>

            <div id="chat-input-container">
                <textarea id="chat-input" placeholder="Type a message..." rows="1"></textarea>
                <button id="chat-send-btn" disabled>
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div id="voice-call-view" class="view call-view">
            <audio id="remote-audio" autoplay playsinline></audio>
            <div class="call-overlay">
                <div id="voice-call-info" class="caller-info">
                    <div class="avatar"></div>
                    <div class="name"></div>
                    <div class="status">Connecting...</div>
                </div>
                <div class="call-controls">
                    <button id="end-voice-call-btn" class="call-btn end" title="End Call">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.67 1.85-.18.18-.43.29-.68.29-.3 0-.55-.12-.73-.3l-2.48-2.48c-.18-.18-.29-.43-.29-.7 0-.26.11-.51.29-.69C6.34 8.76 10.46 7 15 7s8.66 1.76 11.71 4.69c.18.18.29.43.29.69 0 .27-.11.52-.29.7l-2.48 2.48c-.18-.18-.43.3-.73.3-.25 0-.5-.11-.68-.29-.8-.73-1.69-1.36-2.67-1.85-.33-.16-.56-.51-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div id="video-call-view" class="view call-view">
            <video id="remote-video" autoplay playsinline></video>
            <video id="local-video" autoplay playsinline muted></video>
            <div class="call-overlay">
                <div id="video-call-info" class="caller-info">
                    <div class="name"></div>
                    <div class="status">Connecting...</div>
                </div>
                <div class="call-controls">
                    <button id="end-video-call-btn" class="call-btn end" title="End Call">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.67 1.85-.18.18-.43.29-.68.29-.3 0-.55-.12-.73-.3l-2.48-2.48c-.18-.18-.29-.43-.29-.7 0-.26.11-.51.29-.69C6.34 8.76 10.46 7 15 7s8.66 1.76 11.71 4.69c.18.18.29.43.29.69 0 .27-.11-.52-.29.7l-2.48 2.48c-.18-.18-.43.3-.73.3-.25 0-.5-.11-.68-.29-.8-.73-1.69-1.36-2.67-1.85-.33-.16-.56-.51-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="user-profile-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="user-profile-name">User Profile</h2>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div id="user-profile-avatar" class="avatar" style="width: 80px; height: 80px; font-size: 32px; margin: 0 auto 16px;"></div>
                    <h3 id="user-profile-display-name"></h3>
                    <p id="user-profile-username" style="color: var(--text-secondary); margin-bottom: 16px;"></p>
                    <p id="user-profile-bio" style="color: var(--text-secondary); font-style: italic;"></p>
                </div>
                <div class="action-buttons">
                    <button id="follow-user-btn" class="btn btn-primary">Follow</button>
                    <button id="message-user-btn" class="btn btn-secondary">Message</button>
                </div>
            </div>
        </div>
    </div>

    <div id="own-profile-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Profile & Settings</h2>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div id="own-profile-avatar" class="avatar" style="width: 80px; height: 80px; font-size: 32px; margin: 0 auto 16px;"></div>
                    <h3 id="own-profile-display-name"></h3>
                    <p id="own-profile-username" style="color: var(--text-secondary); margin-bottom: 16px;"></p>
                    <div style="display: flex; justify-content: center; gap: 24px; margin-bottom: 16px;">
                        <div style="text-align: center;">
                            <div id="followers-count" style="font-weight: 700; font-size: 1.2rem;">0</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Followers</div>
                        </div>
                        <div style="text-align: center;">
                            <div id="following-count" style="font-weight: 700; font-size: 1.2rem;">0</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Following</div>
                        </div>
                    </div>
                </div>
                <div class="action-buttons" style="flex-direction: column; gap: 12px;">
                    <button id="edit-profile-btn" class="btn btn-secondary">Edit Profile</button>
                    <button id="blocked-users-btn" class="btn btn-secondary">Blocked Users</button>
                    <button id="logout-btn" class="btn btn-danger">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <div id="follow-request-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Follow Request</h2>
                <p class="subtitle">Someone wants to connect with you</p>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 24px;">
                    <div id="request-user-avatar" class="avatar" style="width: 80px; height: 80px; font-size: 32px; margin: 0 auto 16px;"></div>
                    <h3 id="request-user-name"></h3>
                    <p id="request-user-username" style="color: var(--text-secondary);"></p>
                </div>
                <div class="action-buttons">
                    <button id="accept-request-btn" class="btn btn-success">Accept</button>
                    <button id="reject-request-btn" class="btn btn-secondary">Decline</button>
                </div>
            </div>
        </div>
    </div>

    <div id="incoming-call-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-body" style="text-align: center; padding: 40px 24px;">
                <div id="incoming-caller-avatar" class="avatar" style="width: 100px; height: 100px; font-size: 40px; margin: 0 auto 20px;"></div>
                <h2 id="incoming-caller-name" style="margin-bottom: 8px;"></h2>
                <p id="incoming-call-type" style="color: var(--text-secondary); margin-bottom: 40px;">Incoming call...</p>
                <div class="call-controls">
                    <button id="reject-call-btn" class="call-btn reject" title="Reject Call">
                        <svg viewBox="0 0 24 24">
                            <path d="M12 9c-1.6 0-3.15.25-4.6.72v3.1c0 .39-.23.74-.56.9-.98.49-1.87 1.12-2.67 1.85-.18.18-.43.29-.68.29-.3 0-.55-.12-.73-.3l-2.48-2.48c-.18-.18-.29-.43-.29-.7 0-.26.11-.51.29-.69C6.34 8.76 10.46 7 15 7s8.66 1.76 11.71 4.69c.18.18.29.43.29.69 0 .27-.11-.52-.29.7l-2.48 2.48c-.18-.18-.43.3-.73.3-.25 0-.5-.11-.68-.29-.8-.73-1.69-1.36-2.67-1.85-.33-.16-.56-.51-.56-.9v-3.1C15.15 9.25 13.6 9 12 9z"/>
                        </svg>
                    </button>
                    <button id="accept-call-btn" class="call-btn accept" title="Accept Call">
                        <svg viewBox="0 0 24 24">
                            <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="call-settings-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Call Settings</h2>
                <p class="subtitle">Adjust your call preferences</p>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Video Quality</label>
                    <select id="video-quality-select" class="form-control">
                        <option value="high">High Quality</option>
                        <option value="medium" selected>Medium Quality</option>
                        <option value="low">Low Quality</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Audio Quality</label>
                    <select id="audio-quality-select" class="form-control">
                        <option value="high" selected>High Quality</option>
                        <option value="medium">Medium Quality</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="closeModal('call-settings-modal')">Save Settings</button>
            </div>
        </div>
    </div>

    <audio id="ringtone" loop>
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJ" type="audio/wav">
    </audio>

    <script src="script.js"></script>
</body>
</html>
